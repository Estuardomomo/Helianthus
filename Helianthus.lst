---------------------------------------------
PIC ASSEMBLER LISTING
Line    Address Opcode  Instruction
---------------------------------------------
0001    0000            DATO  	EQU 0X21
0002    0000            COUNTY 	EQU 0X22
0003    0000            COUNTMINIX 	EQU 0X23
0004    0000            LIMITY 	EQU 0X24
0005    0000            LIMITMINIX 	EQU 0X25
0006    0000            P1	EQU 0X26
0007    0000            P2    	EQU 0X27
0008    0000            COUNTX EQU 0X28
0009    0000            LIMITX EQU 0X29
0010    0000            VARMAXX	EQU	0X30
0011    0000            VARMAXY	EQU	0X31
0012    0000            
0013    0000            
0014    0000            INICIO
0015    0000            
0016    0000            	ORG		0X00
0017    0000    2801    	GOTO	START
0018    0001            ;--------------------DEFINIR ENTRADAS Y SALIDAS-----------------------
0019    0001            START
0020    0001            	;En los puertos: 1 -> entra | 0 -> sale
0021    0001            	;BIT SET FILE
0022    0001    1683    	BSF 	STATUS, 5	; COLOCAMOS 1 EN EL BIT 5 DE REG. ESTATUS
0023    0002    0186    	CLRF	TRISB		;Todo B es salida
0024    0003    0188    	CLRF	TRISD		;Todo D es salida
0025    0004    1283    	BCF	STATUS, RP0	;TODOS LOS PINES DE B SON SALIDAS
0026    0005            ;----------------INICIALIZAR VARIABLES -------------------------------
0027    0005    3000    	MOVLW	0X00
0028    0006    0086    	MOVWF 	PORTB  		;SET 0 a todas las patas del puerto B
0029    0007    3000    	MOVLW	0X00
0030    0008    0088    	MOVWF 	PORTD  		;SET 0 a todas las patas del puerto D
0031    0009    30FF    	MOVLW 	0xFF		;255	
0032    000A    00A4    	MOVWF 	LIMITY 		;LIMITY = 255	12|10 
0033    000B    3020    	MOVLW 	0x20		;32	2|0
0034    000C    00A5    	MOVWF 	LIMITMINIX		;LIMITMINIX = 32	2|0
0035    000D    3010    	MOVLW	0x10		;16	1|0
0036    000E    00A9    	MOVWF	LIMITX	;LIMITX = 16	1|0
0037    000F    2049    	CALL 	LIMPIARY		;CONTADORY = 0
0038    0010    204C    	CALL 	LIMPIARMINIX		;CONTADORMINIX = 0
0039    0011    204F    	CALL 	LIMIPIARX	;CONTADORx = 0
0040    0012            ;--------------------------- MAIN -----------------------------------
0041    0012            					
0042    0012            ENCONTRAR
0043    0012            
0044    0012    2022    	CALL	CICLOMINIX		;Mover en x, analizar y, regresar en y 
0045    0013    0AA8    	INCF	COUNTX,1	;COUNTX++
0046    0014    0829    	MOVF	LIMITX, W	;W = LIMITX
0047    0015    0228    	SUBWF	COUNTX, w	;W = LIMITX - COUNTX
0048    0016    1D03    	BTFSS	STATUS,Z	;SALTO SI LA RESTA DIO 0
0049    0017    2812    	GOTO	ENCONTRAR		;REPETIR HASTA QUE COUNTX = LIMITX
0050    0018    204F    	CALL	LIMIPIARX	;COUNTX = 0
0051    0019    201B    	CALL 	CICLOX
0052    001A    28BA    	GOTO 	END
0053    001B            
0054    001B            ;---------------------------CICLOS-------------------------------------
0055    001B            CICLOX
0056    001B    203C    	CALL 	CICLOMINIXREVERSA	;REGRESAR TODO EN X PARA NO ENREDAR CABLES
0057    001C    0AA8    	INCF	COUNTX,1	;COUNTX++
0058    001D    0829    	MOVF	LIMITX, W	;W = LIMITX
0059    001E    0228    	SUBWF	COUNTX, w	;W = LIMITX - COUNTX
0060    001F    1D03    	BTFSS	STATUS,Z	;SALTO SI LA RESTA DIO 0
0061    0020    281B    	GOTO	CICLOX	;REPETIR HASTA QUE COUNTX = LIMITX
0062    0021    28BA    	GOTO 	END		;TERMINAR EL PROGRAMA
0063    0022            CICLOMINIX
0064    0022    2052    	CALL 	EJEX		;ROTA EN EJE X
0065    0023            
0066    0023            	
0067    0023            	;MOVE ON X
0068    0023    0AA3    	INCF	COUNTMINIX,1	;COUNTMINIX++
0069    0024    0825    	MOVF  	LIMITMINIX, w	;W = LIMITMINIX
0070    0025    0223    	SUBWF 	COUNTMINIX,w	;W = W - COUNTMINIX
0071    0026    1D03    	BTFSS 	STATUS,Z 	;SALTO SI LA RESTA DIO CERO
0072    0027    2822    	GOTO 	CICLOMINIX		;REPETIR SI COUNTMINIX !=  LIMITMINIX
0073    0028    202B    	CALL	CICLOY 		;MOVERME EN EJE Y y REGRESAR
0074    0029    204C    	CALL 	LIMPIARMINIX		;COUNTMINIX = 0
0075    002A    0008    	RETURN
0076    002B            CICLOY				
0077    002B    205B    	CALL 	EJEY		;ROTAR EN EL EJE Y
0078    002C            	;Cï¿½DIGO PARA COMPARAR Y GUARDAR VALOR DE LA FOTORESISTENCIA-------
0079    002C            
0080    002C            	;-----------------------------------------
0081    002C            	;MOVE ON Y
0082    002C    0AA2    	INCF	COUNTY,1	;COUNTY++ 
0083    002D    0824    	MOVF  	LIMITY, w	;W = LIMITY
0084    002E    0222    	SUBWF 	COUNTY,w	;W = W - COUNTY
0085    002F    1D03    	BTFSS 	STATUS,Z	;SALTO SI LA RESTA DIO 0
0086    0030    282B    	GOTO 	CICLOY		;REPETIR SI COUNT !=  LIMITY
0087    0031    2049    	CALL 	LIMPIARY		;COUNTY = 0
0088    0032    2034    	CALL 	CICLOYREVERSA	;REGRESAR Y
0089    0033    0008    	return
0090    0034            CICLOYREVERSA
0091    0034    2064    	CALL 	REVERSEEJEY	;ROTAR EN REVERSA EN EL EJE Y
0092    0035    0AA2    	INCF	COUNTY,1	;COUNTY++	 
0093    0036    0824    	MOVF  	LIMITY, w	;W = LIMITY
0094    0037    0222    	SUBWF 	COUNTY,w	;W = LIMITY - COUNTY
0095    0038    1D03    	BTFSS 	STATUS,Z	;SALTO SI LA RESTA DIO 0
0096    0039    2834    	GOTO 	CICLOYREVERSA	;REPETIR SI COUNTY != LIMITY
0097    003A    2049    	CALL 	LIMPIARY		;COUNTY = 0
0098    003B    0008    	RETURN
0099    003C            CICLOMINIXREVERSA
0100    003C    206D    	CALL 	REVERSEEJEX	;ROTAR EN REVERSA EN EL EJE X
0101    003D    0AA3    	INCF 	COUNTMINIX,1	;COUNTMINIX++ 
0102    003E    0825    	MOVF  	LIMITMINIX, w	;W = LIMITMINIX
0103    003F    0223    	SUBWF 	COUNTMINIX,w	;W = LIMITMINIX - COUNTMINIX
0104    0040    1D03    	BTFSS 	STATUS,Z	;SALTO SI LA RESTA DIO 0
0105    0041    283C    	GOTO 	CICLOMINIXREVERSA	;REPETIR SI COUNTMINIX != LIMITMINIX
0106    0042    204C    	CALL 	LIMPIARMINIX		;COUNTMINIX = 0
0107    0043    0008    	RETURN
0108    0044            ;------------------------------RETRASO-------------------------------
0109    0044            RETRASO 			; = 0.0001 segundos
0110    0044    30A5    	MOVLW	0xA5	;165
0111    0045    00A6    	MOVWF	p1	;pl = 165
0112    0046            ESPERA
0113    0046    0BA6    	DECFSZ	p1, f	;Decrementar f, saltar si es 0
0114    0047    2846    	GOTO	ESPERA
0115    0048    0008    	RETURN
0116    0049            ;-----------LIMPIAR CONTADORES-----------------------------------------------
0117    0049            LIMPIARY
0118    0049    3000    	MOVLW 	0x00  
0119    004A    00A2    	MOVWF 	COUNTY  
0120    004B    0008    	RETURN
0121    004C            LIMPIARMINIX
0122    004C    3000    	MOVLW 	0x00  ;se asigna la literal a w (0x00)
0123    004D    00A3    	MOVWF 	COUNTMINIX ;muevo w a COUNT 
0124    004E    0008    	RETURN
0125    004F            LIMIPIARX
0126    004F    3000    	MOVLW 	0x00 
0127    0050    00A8    	MOVWF 	COUNTX 
0128    0051    0008    	RETURN
0129    0052            ;----------------ROTAR EN LOS EJES -----------------------------------------
0130    0052            EJEX
0131    0052    2082    	CALL	MV07
0132    0053    207A    	CALL	MV03
0133    0054    208A    	CALL	MV11
0134    0055    2086    	CALL	MV09
0135    0056    2092    	CALL	MV13
0136    0057    208E    	CALL	MV12
0137    0058    2096    	CALL	MV14
0138    0059    207E    	CALL	MV06
0139    005A    0008    	RETURN
0140    005B            EJEY	
0141    005B    20A2    	CALL	MVY7
0142    005C    209A    	CALL	MVY3
0143    005D    20AA    	CALL	MVY11
0144    005E    20A6    	CALL	MVY9
0145    005F    20B2    	CALL	MVY13
0146    0060    20AE    	CALL	MVY12
0147    0061    20B6    	CALL	MVY14
0148    0062    209E    	CALL	MVY6
0149    0063    0008    	RETURN
0150    0064            REVERSEEJEY
0151    0064    209E    	CALL	MVY6
0152    0065    20B6    	CALL	MVY14
0153    0066    20AE    	CALL	MVY12
0154    0067    20B2    	CALL	MVY13
0155    0068    20A6    	CALL	MVY9
0156    0069    20AA    	CALL	MVY11	
0157    006A    209A    	CALL	MVY3
0158    006B    20A2    	CALL	MVY7
0159    006C    0008    	RETURN
0160    006D            REVERSEEJEX
0161    006D    207E    	CALL  	MV06
0162    006E    2096    	CALL	MV14
0163    006F    208E    	CALL	MV12
0164    0070    2092    	CALL	MV13
0165    0071    2086    	CALL	MV09
0166    0072    208A    	CALL	MV11
0167    0073    207A    	CALL	MV03
0168    0074    2082    	CALL	MV07
0169    0075    0008    	RETURN
0170    0076            ;----------------------------MOVIEMIENTOS----------------------------------
0171    0076            MV	
0172    0076    2044    	CALL 	RETRASO		;Retraso de 0.0001 segundos
0173    0077    0821    	MOVF	DATO, W		;W = DATO
0174    0078    0086    	MOVWF	PORTB		;MOVER W AL PUERTO B
0175    0079    0008    	RETURN
0176    007A            MV03
0177    007A    3030    	MOVLW	B'00110000'
0178    007B    00A1    	MOVWF	DATO		;DATO = 0|3
0179    007C    2076    	CALL	MV		;MUEVE DATO AL PUERTO B
0180    007D    0008    	RETURN
0181    007E            MV06
0182    007E    3060    	MOVLW	B'01100000'
0183    007F    00A1    	MOVWF	DATO		;DATO = 0|6
0184    0080    2076    	CALL	MV		;MUEVE DATO AL PUERTO D
0185    0081    0008    	RETURN
0186    0082            MV07
0187    0082    3070    	MOVLW	B'01110000'
0188    0083    00A1    	MOVWF	DATO		;DATO = 0|7
0189    0084    2076    	CALL	MV		;MUEVE DATO AL PUERTO D
0190    0085    0008    	RETURN
0191    0086            MV09
0192    0086    3090    	MOVLW	B'10010000'	;DATO = 0|9
0193    0087    00A1    	MOVWF	DATO		;MUEVE DATO AL PUERTO D
0194    0088    2076    	CALL	MV
0195    0089    0008    	RETURN
0196    008A            MV11
0197    008A    30B0    	MOVLW 	B'10110000'
0198    008B    00A1    	MOVWF	DATO
0199    008C    2076    	CALL	MV
0200    008D    0008    	RETURN	
0201    008E            MV12
0202    008E    30C0    	MOVLW	B'11000000'
0203    008F    00A1    	MOVWF	DATO		;DATO = 0|12
0204    0090    2076    	CALL	MV		;MUEVE DATO AL PUERTO D
0205    0091    0008    	RETURN
0206    0092    30D0    MV13	MOVLW	B'11010000' 
0207    0093    00A1    	MOVWF	DATO 
0208    0094    2076    	CALL	MV 
0209    0095    0008    	RETURN
0210    0096            
0211    0096    30E0    MV14	MOVLW	B'11100000' 
0212    0097    00A1    	MOVWF	DATO 
0213    0098    2076    	CALL	MV 
0214    0099    0008    	RETURN
0215    009A            
0216    009A            MVY3
0217    009A    3003    	MOVLW	B'00000011'
0218    009B    00A1    	MOVWF	DATO		;DATO = 3|0
0219    009C    2076    	CALL	MV		;MUEVE AL PUERTO D
0220    009D    0008    	RETURN
0221    009E            MVY6
0222    009E    3006    	MOVLW	B'00000110'
0223    009F    00A1    	MOVWF	DATO		;DATO = 6|0
0224    00A0    2076    	CALL	MV		;MUEVE AL PUERTO D
0225    00A1    0008    	RETURN
0226    00A2            MVY7
0227    00A2    3007    	MOVLW	B'00000111'
0228    00A3    00A1    	MOVWF	DATO		;DATO = 7|0
0229    00A4    2076    	CALL	MV		;MUEVE AL PUERTO D
0230    00A5    0008    	RETURN
0231    00A6            MVY9
0232    00A6    3009    	MOVLW	B'00001001'
0233    00A7    00A1    	MOVWF	DATO		;DATO = 9|0
0234    00A8    2076    	CALL	MV		;MUEVE AL PUERTO D
0235    00A9    0008    	RETURN
0236    00AA            MVY11	
0237    00AA    300B    	MOVLW 	B'00001011'
0238    00AB    00A1    	MOVWF	DATO
0239    00AC    2076    	CALL	MV
0240    00AD    0008    	RETURN
0241    00AE            MVY12
0242    00AE    300C    	MOVLW	B'00001100'
0243    00AF    00A1    	MOVWF	DATO		;DATO = 12|0
0244    00B0    2076    	CALL	MV		;MUEVE AL PUERTO D
0245    00B1    0008    	RETURN	
0246    00B2            
0247    00B2    300D    MVY13	MOVLW	B'00001101' 
0248    00B3    00A1    	MOVWF	DATO 
0249    00B4    2076    	CALL	MV 
0250    00B5    0008    	RETURN
0251    00B6            
0252    00B6    300E    MVY14	MOVLW	B'00001110' 
0253    00B7    00A1    	MOVWF	DATO 
0254    00B8    2076    	CALL	MV 
0255    00B9    0008    	RETURN
0256    00BA            ;--------------------------------------------------------------------------
0257    00BA            END
---------------------------------------------
Number of errors = 0
